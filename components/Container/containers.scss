@import '@/styles/responsive';

@mixin layoutContainer {
  overflow: auto;
  padding: 0;
}

@mixin contentContainer {
  position: relative;
  box-sizing: border-box;
  width: 100%;
  padding: var(--layout-content-padding, var(--brand-space2));
  > :first-child { margin-top: 0; }
}

.layout-container { @include layoutContainer; }
.layout-content-container { @include contentContainer; }

.layout-toolbar-container {
  position: relative;
  width: 100%;
  padding: var(--layout-toolbar-padding, var(--brand-space2));
  display: flex;
  flex-direction: row;
  gap: var(--layout-gap, 1em);
  align-items: stretch;

  .react-aria-Button { margin: 0; }
}

.layout-with-sidebar {
  // Developer NOTE: This is a utility variable. The javascript will set the
  // value for this var to a _pixel_ value. This gives us the exact width of the
  // container so that we can create precise animations.
  --_sidebar-width: 100%;

  width: 100%;
  display: grid;
  gap: var(--layout-gap, var(--brand-space2));
  // grid-template-rows: auto 1fr;

  .layout-content-container { grid-area: content; }
  .layout-sidebar-container {
    @include contentContainer;

    grid-area: sidebar;
    transition: 0.3s ease-in-out;
    background-color: var(--layout-sidebar-background, var(--slate-100));
    color: var(--layout-sidebar-fg, var(--slate-800));
  }

  &.direction-left {
    grid-template-areas:
      "sidebar"
      "content";

    &.with-toolbar {
      grid-template-areas:
        "toolbar"
        "sidebar"
        "content";
    }

    @include device(md) {
      grid-template-columns: 1fr 3fr;
      grid-template-areas:
        "sidebar content";

      &.with-toolbar {
        grid-template-areas:
          "toolbar toolbar"
          "sidebar content";

        .layout-toolbar-container {
          grid-column-start: 1;
          grid-column-end: 3;
        }
      }

      .layout-sidebar-container {
        &.state-open { right: 0; }
        &.state-closed { right: var(--_sidebar-width); }
      }
    }
  }

  &.direction-right {
    grid-template-areas:
      "content"
      "sidebar";

    &.with-toolbar {
      grid-template-areas:
        "toolbar"
        "content"
        "sidebar";
    }

    @include device(md) {
      grid-template-columns: 2fr 1fr;
      grid-template-areas:
        "content sidebar";

      &.with-toolbar {
        grid-template-areas:
          "toolbar toolbar"
          "content sidebar";

        .layout-toolbar-container {
          grid-column-start: 1;
          grid-column-end: 3;
        }
      }

      .layout-sidebar-container {
        &.state-open { left: 0; }
        &.state-closed { left: calc(var(--_sidebar-width) + 0.5rem); }
      }
    }
  }
}
