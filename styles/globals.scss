@use 'responsive' as r;
@use 'spacing' as spacing;
@use "typography";
@use "elements";
@use "messages";
@use "page";
@use "forms";
@use "variables" as *;

*,
*:before,
*:after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
}


:root {
  --font-family: var(--font-sans-serif, sans-serif);
  --font-family-monospace: 'Fira Code', monospace;
  --font-family-heading: var(--font-sans-serif), sans-serif;
  --font-family-body: var(--font-sans-serif), sans-serif;
  --font-family-code: 'Fira Code', monospace;

  // Generate font-size variables from map
  @each $name, $size in $font-sizes {
    --fs-#{$name}: #{$size};
  }

  --fs-body: var(--fs-base);

  // Generate spacing variables from map
  @each $space-key, $space-value in $spacing {
    --space-#{$space-key}: #{$space-value};
  }

  // Generate color variables from nested map
  @each $color-name, $shades in $colors {
    @each $shade, $value in $shades {
      --#{$color-name}-#{$shade}: #{$value};
    }
  }

  // Line heights
  --lh-tight: 1.1;
  --lh-normal: 1.5;
  --lh-loose: 1.8;


  --fw-normal: 400;
  --fw-medium: 500;
  --fw-semibold: 600;
  --fw-bold: 700;

  --border-radius-sm: 0.125rem;
  --border-radius-md: 0.25rem;
  --border-radius-lg: 0.5rem;
  --border-radius-xl: 1rem;


  // Base colors
  --background-color: #f8f8f8;
  --bg-white: var(--gray-50);
  --bg-black: #000000;
  --text-black: #05042E;

  // Interactive states
  --highlight-hover: rgb(0 0 0 / 0.07);
  --highlight-pressed: rgb(0 0 0 / 0.15);
  --highlight-overlay: rgb(from #6f46ed r g b / 15%);

  --highlight-background: var(--brand-primary);
  --highlight-background-pressed: var(--brand-primary);
  --highlight-background-invalid: var(--brand-error);
  --highlight-foreground: var(--bg-white);
  --highlight-foreground-pressed: var(--bg-white);
  --highlight-foreground-invalid: var(--brand-error);

  --selected-color: var(--brand-primary);
  --selected-color-pressed: var(--brand-primary);
  --checkmark-color: var(--bg-white, #fffff) !important;
  --overlay-background: var(--bg-white);

  // Focus
  --focus-ring: var(--blue-900);
  --focus-ring-offset: 2px;
  --focus-ring-color: var(--blue-900);


  // Card
  --card-background: var(--gray-50);
  --card-border: none;
  --card-shadow: 0px 4px 6px 0px rgba(0, 0, 0, 0.09);
  --card-padding: var(--space-5);
  --card-border-radius: 0.3125rem;


  // Text
  --text-color: var(--text-black);
  --text-color-base: var(--gray-500);
  --text-color-hover: var(--gray-600);
  --text-color-disabled: var(--gray-200);
  --text-color-placeholder: var(--gray-400);

  // Other kinds of text
  --text-byline-color: var(--blue-500);

  // Links
  --link-color: var(--blue-500);
  --link-color-secondary: var(--brand-secondary);
  --link-color-pressed: var(--blue-700);
  --link-hover-color: var(--blue-900);

  // Borders
  --border-color: var(--gray-200);
  --border-color-hover: var(--gray-400);
  --border-color-pressed: var(--gray-400);
  --border-color-disabled: var(--gray-100);

  // Form fields
  --field-background: var(--gray-50);
  --field-text-color: var(--gray-600);
  --field-label-color: #050a69;
  --field-bg-color: white;
  --field-fg-color: #333;
  --field-border-color: #e1e1e1;


  // Buttons
  --button-radius: 4px;
  --button-foreground: var(--text-color);
  --button-background: var(--gray-50);
  --button-background-pressed: var(--background-color);

  // Headings
  --heading-color: var(--text-black);

  // Error
  --brand-error: var(--red-500);
  --invalid-color: var(--red-500);

  // Legacy spacing (kept for backwards compatibility)
  --brand-space1: 0.5em;
  --brand-space2: 1em;
  --brand-space3: 1.5em;

  // Legacy line heights (kept for backwards compatibility)
  --brand-line-height0: 1.1;
  --brand-line-height1: 1.3;
  --brand-line-height2: 1.5;

  // Grid and Page Structure
  --grid-gap: var(--brand-space2);
  --page-header-gap-col: var(--grid-gap);
  --page-header-gap-row: var(--brand-space3);
}

/* Windows high contrast mode overrides */
@media (forced-colors: active) {
  :root {
    --background-color: Canvas;
    --focus-ring-color: Highlight;
    --text-color: ButtonText;
    --text-color-base: ButtonText;
    --text-color-hover: ButtonText;
    --text-color-disabled: GrayText;
    --text-color-placeholder: ButtonText;
    --link-color: LinkText;
    --link-color-secondary: LinkText;
    --link-color-pressed: LinkText;
    --border-color: ButtonBorder;
    --border-color-hover: ButtonBorder;
    --border-color-pressed: ButtonBorder;
    --border-color-disabled: GrayText;
    --field-background: Field;
    --field-text-color: FieldText;
    --overlay-background: Canvas;
    --button-background: ButtonFace;
    --button-background-pressed: ButtonFace;
    --highlight-background: Highlight;
    --highlight-background-pressed: Highlight;
    --highlight-background-invalid: LinkText;
    --highlight-foreground: HighlightText;
    --highlight-foreground-pressed: HighlightText;
    --invalid-color: LinkText;
    --invalid-color-pressed: LinkText;
  }
}

* {
  font-family: inherit; // This is make sure buttons, standard elements all inherit the font-family from the body
}

html {
  font-family: var(--font-family), "Poppins", sans-serif;

}

body {
  font-family: var(--font-family), "Poppins", sans-serif;
  font-size: var(--fs-base);
  color: var(--text-color);
  background-color: var(--background-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.skip-nav {
  position: fixed;
  left: -10000px;
}

.hidden-accessibly {
  height: 1px;
  overflow: hidden;
  width: 1px;
  position: absolute;
  clip: rect(1px, 1px, 1px, 1px);
  clip-path: inset(50%);
  white-space: nowrap;
}

#App {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  line-height: var(--lh-normal);
}


// this is potentailly temporary when integrating real side bar
.sidebar-section {
  margin-bottom: var(--space-5);
}

.sidebar-section>button:not(:last-child) {
  margin-right: var(--space-3);
}

.sidebar-section-title {
  margin-bottom: var(--space-2);
}

.sidebar {
  position: relative;
}

.sidebar-inner {
  margin-top: var(--space-5);

  @include r.device(xxl) {
    position: sticky;
    top: 0;
  }
}

.clear-filter {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}


.search-match-text {
  font-size: var(--fs-small);
  margin-top: var(--space-2);
  margin-bottom: var(--space-2);
}




.statusPanelContent {
  padding: var(--space-4);
  background-color: var(--gray-75);
  border-radius: var(--border-radius-lg);

  h3 {
    font-size: var(--fs-h5);
    margin: 0 0 var(--space-1) 0;
    padding: 0;
  }

  p {
    padding: 0;
    margin: 0 0 var(--space-2) 0;
    font-size: var(--fs-base);

    a {
      // Uses default text-link styling from above
      font-size: var(--fs-base);
    }
  }
}

// Default link styling - comprehensive link styles for all states
a {
  color: var(--blue-500);
  font-weight: var(--fw-semibold);
  text-decoration: underline;
  text-underline-offset: 0.2em;
  text-decoration-thickness: 1px;
  transition: color 0.2s ease;

  &:hover {
    color: var(--blue-900);
  }

  &:active {
    color: var(--blue-700);
  }

  &:visited {
    color: var(--blue-600);
  }

  &:focus {
    outline: 2px solid var(--yellow-400);
    outline-offset: 2px;
    background-color: var(--yellow-200);
  }
}

// Explicit text-link class for when you want to be specific
.text-link {
  color: var(--blue-500);
  font-weight: var(--fw-semibold);
  text-decoration: underline;
  text-underline-offset: 0.2em;
  text-decoration-thickness: 1px;

  &:hover {
    color: var(--blue-900);
  }

  &:focus {
    outline: 2px solid var(--yellow-400);
    outline-offset: 2px;
  }
}

// Override default for button-style links and special components
.button-link,
.btn,
.dmpui-frontend-btn,
.card-link,
.plan-link,
.link,
// Component-specific .link classes
button[type="button"] a,
button[type="submit"] a,
input[type="button"],
input[type="submit"],
input[type="reset"] {
  font-weight: var(--fw-normal);
  text-decoration: none;
  text-underline-offset: unset;
  text-decoration-thickness: unset;

  &:hover {
    text-decoration: none;
  }
}

// Override for header navigation links
header a,
.dmpui-frontend-header a,
nav a {
  font-weight: var(--fw-normal);

  // Let individual components handle their own styling
  &.text-link {
    font-weight: var(--fw-semibold);
  }
}

// Override for footer links - they have their own white styling
footer a {
  font-weight: var(--fw-normal);

  &.text-link {
    font-weight: var(--fw-semibold);
  }
}

.sidePanelContent {
  padding-top: var(--space-1);

  // Optional border top - only when needed
  &.withBorder {
    border-top: 1px solid var(--gray-100);
  }

  .statusForm {
    margin-bottom: var(--space-8);
  }
}

.sidePanel {

  a {
    // Uses default text-link styling from above
    font-size: var(--fs-base);
    display: inline-block;
    margin-top: 0;

    &:hover {
      color: var(--blue-900);
    }

    &:focus-visible {
      outline: 2px solid var(--focus-ring);
      outline-offset: 2px;
      border-radius: var(--border-radius-sm);
    }
  }

  .buttonContainer {
    display: flex;
    justify-content: space-between;
    margin: 0 0 var(--space-4) 0;
    gap: var(--space-2);
    border-bottom: 1px solid var(--gray-100);
    padding-bottom: var(--space-4);

    @include r.device('sm') {
      flex-direction: column;
      gap: var(--space-3);
    }

    @include r.device('md') {
      flex-direction: row;
      gap: var(--space-2);
    }
  }

  .panelRow {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-3);
    margin-bottom: var(--space-4);


    @include r.device('sm') {
      flex-direction: column;
      gap: var(--space-2);
    }

    @include r.device('md') {
      flex-direction: row;
      gap: var(--space-3);
    }

    h3,
    .h3 {
      font-size: var(--fs-base);
      font-weight: 600;
      margin: 0;
      padding: 0;
      flex-shrink: 0;
    }

    p {
      margin: 0;
      font-size: var(--fs-small);
      flex: 1;
    }

    .sidePanelLink,
    .buttonLink {
      font-size: var(--fs-base);
      font-weight: 300;
      color: var(--link-color);
      text-decoration: underline;
      transition: color 0.2s ease;
      display: inline-block;
      margin: 0;
      flex-shrink: 0;

      &:hover {
        color: var(--blue-900);
      }

      &:focus-visible {
        outline: 2px solid var(--focus-ring);
        outline-offset: 2px;
        border-radius: var(--border-radius-sm);
      }
    }
  }
}

// Button styled as link - removes all button styling and applies link styling
// Using higher specificity and !important to override existing button-link styles
.react-aria-Button.button-as-link,
button.button-as-link {
  // Remove all button styling
  background: none !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
  cursor: pointer !important;
  border-radius: 0 !important;

  // Apply default link styling with !important to override existing rules
  color: var(--blue-500) !important;
  font-weight: var(--fw-semibold) !important;
  text-decoration: underline !important;
  text-underline-offset: 0.2em !important;
  text-decoration-thickness: 1px !important;
  transition: color 0.2s ease !important;

  &:hover {
    color: var(--blue-900) !important;
    text-decoration: underline !important;
  }

  &:active {
    color: var(--blue-700) !important;
    transform: none !important;
  }

  &:visited {
    color: var(--blue-600) !important;
  }

  &:focus {
    outline: 2px solid var(--yellow-400) !important;
    outline-offset: 2px !important;
    background-color: var(--yellow-200) !important;
  }
}